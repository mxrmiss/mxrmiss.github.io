---
title: Linux高级
tag: 
- [Linux]
categories:
- Linux
---



# Linux 高级程序设计

- [笔记参考视频链接](https://www.bilibili.com/video/BV1Mk4y1z7Tw/?p=4)
- 注：此笔记参考了视频教程中的内容，以及部分资料，仅供学习参考



## 一、shell编程

### 1.1概述

#### 1.1.1 shell作为应用程序

<!--more-->

- 交互式地解释、执行用户输入的命令,将用户的操作翻译成机器可以识别的语言,完成相应功能称之为shell命令解析器 ，shell是用户和Linux内核之间的接口程序。 用户在提示符下输入的命令都由shell先解释，然后传给Linux核心。
-  它调用了系统核心的大部分功能来执行程序、并以并行的方式协调各个程序的运行 。Linux系统中提供了好几种不同的shell命令解释器,如sh、ash、bash等。一般默认使用bash作为默认的解释器。我们后面编写的shell脚本,都是由上述shell命令解释器解释执行的。

![image-20200607170442735](/home/blacksheep/.config/Typora/typora-user-images/image-20200607170442735.png)

![image-20200607170727415](/home/blacksheep/.config/Typora/typora-user-images/image-20200607170727415.png)

#### 1.1.2 shell作为程序设计语言

- 简称shell脚本，用任意文本编译器添加内容，再授予权限即可使用，与一些编程语言相类似
- /etc/profile 此文件为系统的每个用户设置环境信息,当用户第一次登录时,该文件被执行,系统的公共环境变量在这里设置 ，开始自启动的程序,一般也在这里设置
-  ~/.bashrc用户自己的家目录中的.bashrc 登录时会自动调用,打开任意终端时也会自动调用。这个文件一般设置与个人用户有关的环境变量,如交叉编译器的路径等等
- 用户编写,需要手动调用的 例如我们上面编写的脚本都属于此类 无论是系统调用的还是需要我们自己调用的,其语法规则都一样

### 1.2 shell语法

#### 1.2.1 脚本的定义与执行

1. 定义以开头:#!/bin/sh #!用来声明脚本由什么shell解释,否则使用默认shell
2. 单个"#"号代表注释当前行
3. 执行: chmod + x test.sh ./test.sh 增加可执行权限后执行 
4. bash test.sh 直接指定使用bash解释test.sh 
5.  .  test.sh(source test.sh) 使用当前shell读取解释test.sh
6. 脚本的书写不能包含空格

#### 1.2.2 变量

1. 自定义变量
定义变量 变量名=变量值 如:num=10 

2. 引用变量 $变量名
    如:i=$num 把变量num的值付给变量i 

3. 显示变量 使用echo命令可以显示单个变量取值 echo
    $num 

4. 清除变量 使用unset命令清除变量 unset varname

5. 变量的其它用法: read string 从键盘输入一个字符串付给变量

6. string readonly var=100 定义一个只读变量,只能在定义时初始化,以后不能改变,不能被清除。 

7. export var=300 使用export说明的变量,会被导出为环境变量,其它shell均可使用 注意:此时必须使用source 2_var.sh才可以生效

8. 注意事项:

  1. 变量名只能包含英文字母下划线,不能以数字开头 1_num=10 错误 num_1=20 正确

  2. 等号两边不能直接接空格符,若变量中本身就包含了空格,则整个字符串都要用双引号、或单引号括起来;双引号内的特殊字符可以保有变量特性,但是单引号内的特殊字符则仅为一般字符。name=aa bb //错误 name="aa bb" //正确 echo "$name is me" //输出:aa bb is me echo'$name is me' //输出:$name is me 例2: 2_var.sh

#### 1.2.3 环境变量（类似全局变量）

1. shell在开始执行时就已经定义了一些和系统的工作环境有关的变量，我们可以在shell中直接使用$name引用
2. 定义：一般在~/bashrc或/etc/profile文件中（系统自动调用的脚本）使用export设置，允许用户后来修改
3. 设置环境变量：

- 临时设置：使用export命令
- 永久设置：需要在配置文件（~/bashrc或/etc/profile文件）中进行设置即可，设置完毕后需要通过source命令配置文件立即生效

4. 预设变量：

```
$#:传给shell脚本参数的数量 
$*:传给shell脚本参数的内容 $1、$2、$3、...、$9:运行脚本时传递给其的参数,用空格隔开
$?:命令执行后返回的状态 "$?"用于检查上一个命令执行是否正确(在Linux中,命令退出状态为0表示该命令正确执行,任何非0值表示命令出错)。
$0:当前执行的进程名 $$:当前进程的进程号 
"$$"变量最常见的用途是用作临时文件的名字以保证临时文件不会重复

```

5. 符号的特殊用法：

- 双引号里的变量会被引用解释
- 单引号里的字符会被直接当成字符串使用
- 反引号：获取一个shell命令的输出结果，或者将该结果赋予一个变量再去使用，单引号的使用必须在双引号内才会被解释，不能放在单引号内
- 转义符使用时必须在echo后面加-e

```
echo -e "this \n is \n an apple"
```

- 小括号：里面的内容由子shell完成，不影响不影响当前shell中的变量
- 大括号：在当前shell中执行会影响当前变量



#### 1.2.4 条件测试语句

1. 为什么要测试？相当于代码中的局部调试

2. test命令：用于测试字符串、文件状态和数字

3. test命令的俩种形式：

   ​			test或 [ condition ]  //方括号中的条件俩边必须要加空格

4. 